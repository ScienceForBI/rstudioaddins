<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title></title>

<script src="index_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.1/css/cosmo.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.1/shim/respond.min.js"></script>

<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet">

<script src="libs/tocify-1.9.1/jquery-ui-1.9.2.custom.min.js"></script>
<script src="libs/tocify-1.9.1/jquery.tocify.min.js"></script>

<style type="text/css">
@media (max-width: 992px) {
#toc {
  position: relative;
  width: 100%;
  margin: 0px 0px 20px 0px;
}
}
</style>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="index_files/highlight/textmate.css"
      type="text/css" />
<script src="index_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">


<div class="row-fluid">

<div class="span3 col-md-3">
  <div id="toc"></div>
</div>

<div class="main-content span9 col-md-9">

<style type="text/css">

body {
  padding-top: 20px;
  min-width: 200px;
}

/* offset scroll position for anchor links */
h2 {
  padding-top: 25px;
  margin-top: -25px;
}
h3 {
  padding-top: 25px;
  margin-top: -25px;
}
h4 {
  padding-top: 25px;
  margin-top: -25px;
}

.main-content {
  padding-left: 30px;
  padding-right: 40px;
}

.section {
  margin-bottom: 25px;
}

.tocify {
  border: none;
  background-color: #ECF2F6;
  margin-top: 20px;
}

.tocify .list-group-item {
  border-radius: 0px;
  background-color: #ECF2F6;
  padding-top: 0px;
  padding-bottom: 0px;
  color: #3676BD;
}

.tocify .list-group-item.active {
  color: white;
  background-color: #428DC8;
}

.tocify .list-group-item:hover {
  background-color: #caddec;
}

.tocify .list-group-item.active:hover {
  color: white;
  background-color: #428DC8;
}

.tocify-subheader {
  display: inline;
}

.tocify-subheader .tocify-item {
  font-size: 0.95em;
  padding-left: 12px;
}

.doc-header {
  font-size: 39px;
}

.doc-footer {
  margin-top: 30px;
}

#overview h2 {
  visibility: hidden;
  height: 0px;
}

blockquote {
  font-size: 1em;
}

</style>



<div id="overview" class="section level2">
<h2>Overview</h2>
<div class="doc-header">
RStudio Addins
</div>
<p>Addins provide a mechanism for executing R functions interactively from within the RStudio IDE—either through keyboard shortcuts, or through the <code>Addins</code> menu. Addins can be as simple as a function that inserts a commonly used snippet of text, and as complex as a Shiny application that accepts input from the user, and later mutates a document open in RStudio.</p>
<p>The sky is limit for addins! For example:</p>
<div class="row">
<div class="col-xs-6">
<h4 id="interactively-subset-a-dataset">Interactively subset a dataset</h4>
<p><a href="demo/demo-subset.gif"><img src="demo/demo-subset.png" alt="Subset Demo" /></a></p>
</div>
<div class="col-xs-6">
<h4 id="interactively-reformat-r-code">Interactively reformat R code</h4>
<p><a href="demo/demo-reformat.gif"><img src="demo/demo-reformat.png" alt="Reformat Demo" /></a></p>
</div>
</div>
<p>This guide walks you through the basics of installing addins, binding keyboard shorcuts to them, and finally developing your own addins.</p>
</div>
<div id="using-addins" class="section level2">
<h2>Using Addins</h2>
<div id="installation" class="section level3">
<h3>Installation</h3>
<p>RStudio Addins are distributed and installed from within standard R packages. Once you’ve installed an R package that contains addins they’ll be immediately available within the IDE.</p>
<p>Let’s start by playing around with a couple of the example addins provided by the <a href="https://github.com/rstudio/addinexamples">addinexamples</a> package. Within RStudio, install this package (plus its requisite dependencies) with:</p>
<pre class="r"><code>if (!requireNamespace(&quot;devtools&quot;, quietly = TRUE))
  install.packages(&quot;devtools&quot;)

devtools::install_github(&quot;rstudio/shiny&quot;)
devtools::install_github(&quot;rstudio/shinygadgets&quot;)
devtools::install_github(&quot;rstudio/addinexamples&quot;)</code></pre>
<p>Note that for the time being the <strong>addinexamples</strong> package requires development versions of two other packages so be sure to install those as well!</p>
</div>
<div id="executing-addins" class="section level3">
<h3>Executing Addins</h3>
<p>After installing this package, you should see the <code>Addins</code> toolbar menu populated with the addins exported by this package:</p>
<p><img src="images/addins-menu.png" alt="Addins Menu" /></p>
<p>Try clicking the <strong>Insert %in%</strong> addin – you’ll see the text <code>%in%</code> inserted at the cursor position.</p>
<p>This is a simple addin, but we can also build interactive Shiny applications to be launched as addins. For example, datasets can be subsetted interactively using the <strong>Subsetter</strong> addin – click the following image for a quick demo.</p>
</div>
<div id="keyboard-shorcuts" class="section level3">
<h3>Keyboard Shorcuts</h3>
<p>Of course, it would be preferable to insert <code>%in%</code> through a keyboard shortcut rather than through clicking through a menu, so let’s bind this addin to a keyboard shortcut.</p>
<p>First, click <code>Browse Addins...</code> to explore all of the addins currently available:</p>
<p><img src="images/addins-dialog.png" alt="Browse Addins" /></p>
<p>At the bottom left of the dialog, you’ll see the <code>Keyboard Shortcuts...</code> button. Click this, and the <code>Modify Keyboard Shortcuts</code> widget will be opened, filtered to the current set of addins. Let’s bind <code>Insert In</code> to <code>Ctrl+Alt+Shift+K</code> – click on the ‘Shortcut’ field for the ‘Insert In’ addin row, and type those keys.</p>
<p><img src="images/addins-shortcuts.png" alt="Keyboard Shortcuts" /></p>
<p>You’ve now bound this addin to a keyboard shortcut! Try typing <code>Ctrl+Alt+Shift+K</code> in the editor, and you’ll see <code>%in%</code> inserted at the cursor position. You can imagine generating a number of these addins yourself for other commonly used code snippets or operators.</p>
</div>
</div>
<div id="developing-addins" class="section level2">
<h2>Developing Addins</h2>
<div id="addin-basics" class="section level3">
<h3>Addin Basics</h3>
<p>You might be surprised to know that <code>insert_in</code> is implemented entirely with R code. In fact, the R function that made this happen is located <a href="https://github.com/rstudio/addinexamples/blob/master/R/insert-in.R">here</a>, and its definition is simply:</p>
<pre class="r"><code>insert_in &lt;- function() {
  rstudioapi::insertText(&quot; %in% &quot;)
}</code></pre>
<p>If you want to try something silly, try executing <code>addinexamples::insert_in()</code> directly at the console. You should also see <code>%in%</code> inserted immediately after executing the function. This is exactly what RStudio is doing behind the scenes; it’s just allowing you to execute that function through some UI rather than manually writing and executing the function yourself.</p>
<p>There are two major types of addins:</p>
<ol style="list-style-type: decimal">
<li><p>Text Macros, which insert text into the console or source pane and in some cases transform text witin the source pane.</p></li>
<li><p>Shiny Gadgets, which are fully interactive Shiny applications. Gadgets may also do text transformations but they of course capable of much more.</p></li>
</ol>
<p>More details on both types of addin are provided below, but first we’ll take a look at using the <a href="https://cran.rstudio.com/web/packages/rstudioapi/index.html">rstudioapi</a> package to interact with the IDE as well the requirements for registering addins.</p>
</div>
<div id="rstudio-api" class="section level3">
<h3>RStudio API</h3>
<p>TODO: describe general capabiliites and philosophy of the API</p>
<table style="width:11%;">
<colgroup>
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>getActiveDocumentContext()</code></td>
<td align="left">Returns information about the currently active RStudio document (see below for details)</td>
</tr>
<tr class="even">
<td align="left"><code>insertText(location, text, id = NULL)</code></td>
<td align="left">Insert text at specific location within a document.</td>
</tr>
<tr class="odd">
<td align="left"><code>modifyRange(location, text, id = NULL)</code></td>
<td align="left">Modify (replace) the contents of a specific location within document.</td>
</tr>
<tr class="even">
<td align="left"><code>setDocumentContents(text, id = NULL)</code></td>
<td align="left">Replace the entire contents of a document.</td>
</tr>
</tbody>
</table>
<p>The list returned from <code>getActiveDocumentContext()</code> provides the following information about the active RStudio document:</p>
<ul>
<li><em>id</em> — The unique document id.</li>
<li><em>path</em> — The path to the document on disk.</li>
<li><em>contents</em> — The contents of the document.</li>
<li><em>selection</em> — A list of selections.</li>
</ul>
<p>The <code>id</code> can be passed to other functions within the API to address a specific document instance rather than the currently active document. Even though it’s optional it’s highly recommended that you use the <code>id</code> parameter to ensure that you modify the document that was active when your addin was invoked.</p>
<p>The <code>location</code> argument to several of the API functions specifies a position or range to operate on. See the <a href="https://cran.r-project.org/web/packages/rstudioapi/rstudioapi.pdf">rstudioapi manual</a> for more details on specifying locations.</p>
</div>
<div id="registering-addins" class="section level3">
<h3>Registering Addins</h3>
<p>Since addins are just R functions, how does <code>addinexamples</code> let RStudio know what functions are safe to call as addins? This is done through the registration file located at <a href="https://github.com/rstudio/addinexamples/blob/master/inst/rstudio/addins.dcf">inst/rstudio/addins.dcf</a>. Each addin you register should have the following four fields:</p>
<ul>
<li><strong>Name</strong>: The name of the addin.</li>
<li><strong>Description</strong>: A description of the addin.</li>
<li><strong>Binding</strong>: The R function this addin is associated with.</li>
<li><strong>Interactive</strong>: Whether this addin is interactive (e.g. as a Shiny application).</li>
</ul>
<p>For example:</p>
<pre class="dcf"><code>Name: Insert %in%
Description: Inserts `%in%` at the cursor position.
Binding: insert_in
Interactive: false</code></pre>
<p>If you want to create your own RStudio addins, all you need to do is:</p>
<ol style="list-style-type: decimal">
<li>Create an R package,</li>
<li>Create some R functions, and</li>
<li>Create a file at <code>inst/rstudio/addins.dcf</code>,</li>
</ol>
<p>RStudio will automatically discover and register these addins when your package is installed.</p>
</div>
<div id="text-macros" class="section level3">
<h3>Text Macros</h3>
<p>Describe the basic use case for non-interactive addins (text insertion or transformation), emphasize the requirement of registering them with Interactive: false and describe the implications of this (nothing emitted to the console, executed in the background, can <em>never</em> hang, etc.)</p>
<p>Perhaps show or link to the source code for a couple of other examples.</p>
</div>
<div id="shiny-gadgets" class="section level3">
<h3>Shiny Gadgets</h3>
<p>Here we’d have a whole top level section on developing addins with shiny gadgets. We’d want to cover:</p>
<ul>
<li>Requirement for “Interactive: true”</li>
<li>Basic concept of a shiny gadget + a simple example + links to shiny gadget docs</li>
<li>Describe the different viewing options (pane, dialog, external) and their pros and cons.</li>
<li>Links to source code for shiny gadgets in our addinexamples package</li>
</ul>
<p>This should serve as a very simple introduction to shiny gadgets such that folks can see the concept and it’s application but should defer to the shinygadgets docs for more in depth topics.</p>
<p>Perhaps show a single example and then link to the source code of other examples.</p>
<div class="doc-footer">
<p>Questions? Comments? Suggestions? Please get in touch with us at the <a href="http://support.rstudio.com/">support forums</a></p>
</div>
</div>
</div>


</div> <!--span-9-->
</div> <!--row-fluid-->

<style type="text/css">
.main-container {
  max-width: none;
}
</style>

<script>
$(function() {
    var toc = $("#toc").tocify({
      selectors: "h2,h3",
      theme: "bootstrap3",
      context: '.main-content',
      hashGenerator: 'pretty',
      showAndHide: false
    }).data("toc-tocify");
    $(".optionName").popover({ trigger: "hover" });
});
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
